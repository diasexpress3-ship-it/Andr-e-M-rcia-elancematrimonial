<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Andr√© Victor & M√°rcia Sandra - Casamento</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;600&family=Playfair+Display:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Montserrat', sans-serif;
            background-color: #fff9f0;
            color: #2c1810;
            overflow-x: hidden;
        }
        h1, h2, h3, .font-serif {
            font-family: 'Playfair Display', serif;
        }

        /* Anima√ß√µes */
        @keyframes kenburns {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        .animate-kenburns {
            animation: kenburns 20s ease-in-out infinite;
        }

        @keyframes sway-x {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(10px); }
            75% { transform: translateX(-10px); }
        }
        .animate-sway-x {
            animation: sway-x 5s ease-in-out infinite;
        }

        @keyframes sway-all {
            0%, 100% { transform: translate(0, 0); }
            25% { transform: translate(8px, -8px); }
            50% { transform: translate(-8px, 8px); }
            75% { transform: translate(8px, 8px); }
        }
        .animate-sway-all {
            animation: sway-all 6s ease-in-out infinite;
        }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .reveal-up {
            animation: fadeInUp 1s ease-out forwards;
        }

        @keyframes pulse-gold {
            0% { box-shadow: 0 0 0 0 rgba(212, 175, 55, 0.4); }
            70% { box-shadow: 0 0 0 10px rgba(212, 175, 55, 0); }
            100% { box-shadow: 0 0 0 0 rgba(212, 175, 55, 0); }
        }
        .animate-pulse-gold {
            animation: pulse-gold 2s infinite;
        }

        /* Estilo para o painel admin */
        #admin-panel {
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            background: rgba(255,255,255,0.95);
        }
        #admin-panel:hover {
            box-shadow: 0 4px 20px rgba(212, 175, 55, 0.3);
        }
        #admin-senha:focus {
            border-color: #d4af37;
            outline: none;
            box-shadow: 0 0 0 2px rgba(212,175,55,0.2);
        }
    </style>
    <script type="importmap">
        {
            "imports": {
                "react": "https://esm.sh/react@^19.2.4",
                "react-dom/": "https://esm.sh/react-dom@^19.2.4/",
                "react/": "https://esm.sh/react@^19.2.4/",
                "vite": "https://esm.sh/vite@^7.3.1",
                "@vitejs/plugin-react": "https://esm.sh/@vitejs/plugin-react@^5.1.4"
            }
        }
    </script>
    <link rel="stylesheet" href="/index.css">
</head>
<body>
    <!-- ===== PAINEL ADMIN COM SENHA ===== -->
    <div id="admin-panel" style="position: fixed; top: 20px; right: 20px; z-index: 9999; background: white; padding: 15px 20px; border-radius: 50px; box-shadow: 0 4px 20px rgba(0,0,0,0.1); display: flex; gap: 12px; align-items: center; border: 1px solid #d4af37;">
        <span style="color: #d4af37; font-size: 18px;">üîê</span>
        <input type="password" id="admin-senha" placeholder="Senha admin" style="padding: 8px 15px; border: 1px solid #e2e8f0; border-radius: 25px; font-size: 14px; outline: none; transition: all 0.3s; width: 140px;">
        <button onclick="verificarSenha()" style="background: #d4af37; color: white; border: none; padding: 8px 20px; border-radius: 25px; cursor: pointer; font-weight: 600; font-size: 14px; transition: all 0.3s; letter-spacing: 0.5px; box-shadow: 0 2px 10px rgba(212,175,55,0.3);">
            Ativar
        </button>
        <span id="admin-status" style="font-size: 13px; color: #666; min-width: 120px;"></span>
    </div>

    <div id="root"></div>
    
    <script type="module" src="/index.tsx"></script>
    
    <script>
        // ===== CONFIGURA√á√ïES =====
        const SENHA_ADMIN = "Sahombe13"; // ‚úÖ SENHA DEFINIDA: Sahombe13
        
        // ===== CHAVES DO LOCALSTORAGE =====
        const STORAGE_KEYS = {
            CAPA: 'capaImage',
            MOMENTO: 'momentoImage',
            LOCAL: 'localImage'
        };
        
        // ===== SISTEMA DE SENHA =====
        window.verificarSenha = function() {
            const senhaDigitada = document.getElementById('admin-senha')?.value;
            const statusEl = document.getElementById('admin-status');
            
            if (!senhaDigitada || !statusEl) return;
            
            if (senhaDigitada === SENHA_ADMIN) {
                localStorage.setItem('isAdmin', 'true');
                statusEl.innerHTML = '‚úÖ Admin ativado!';
                statusEl.style.color = 'green';
                mostrarBotoesUpload();
                
                document.getElementById('admin-panel').style.borderColor = '#4CAF50';
                setTimeout(() => {
                    statusEl.innerHTML = '‚úÖ Admin ativo';
                    location.reload();
                }, 1500);
            } else {
                localStorage.removeItem('isAdmin');
                statusEl.innerHTML = '‚ùå Senha incorreta';
                statusEl.style.color = 'red';
            }
        };
        
        // ===== CONTROLE DOS BOT√ïES DE UPLOAD =====
        function mostrarBotoesUpload() {
            const botoes = document.querySelectorAll('button, .upload-button, [class*="carregar"], input[type="file"], .bg-white\\/80');
            
            botoes.forEach(el => {
                if (el.textContent?.includes('Carregar') || 
                    el.textContent?.includes('üì∏') ||
                    el.textContent?.includes('Foto') ||
                    el.textContent?.includes('Upload') ||
                    el.className?.includes('carregar') ||
                    el.className?.includes('upload') ||
                    el.type === 'file') {
                    
                    el.style.display = 'flex';
                    el.style.opacity = '1';
                    el.style.visibility = 'visible';
                    el.style.pointerEvents = 'auto';
                }
            });
            
            setTimeout(() => {
                const botoesReact = document.querySelectorAll('button');
                botoesReact.forEach(botao => {
                    if (botao.textContent?.includes('Carregar Foto') || 
                        botao.textContent?.includes('üì∏')) {
                        botao.style.display = 'flex';
                        botao.style.visibility = 'visible';
                        
                        const inputFile = botao.closest('div')?.querySelector('input[type="file"]');
                        if (inputFile) {
                            inputFile.style.display = 'block';
                            inputFile.style.visibility = 'visible';
                        }
                    }
                });
            }, 500);
        }
        
        function esconderBotoesUpload() {
            const isAdmin = localStorage.getItem('isAdmin') === 'true';
            
            if (!isAdmin) {
                const botoes = document.querySelectorAll('button, .upload-button, [class*="carregar"], input[type="file"], .bg-white\\/80');
                
                botoes.forEach(el => {
                    if (el.textContent?.includes('Carregar') || 
                        el.textContent?.includes('üì∏') ||
                        el.textContent?.includes('Foto') ||
                        el.textContent?.includes('Upload') ||
                        el.className?.includes('carregar') ||
                        el.className?.includes('upload') ||
                        el.type === 'file') {
                        
                        el.style.display = 'none';
                        el.style.visibility = 'hidden';
                        el.style.pointerEvents = 'none';
                    }
                });
                
                const botoesReact = document.querySelectorAll('button');
                botoesReact.forEach(botao => {
                    if (botao.textContent?.includes('Carregar Foto') || 
                        botao.textContent?.includes('üì∏')) {
                        botao.style.display = 'none';
                        
                        const inputFile = botao.closest('div')?.querySelector('input[type="file"]');
                        if (inputFile) {
                            inputFile.style.display = 'none';
                        }
                    }
                });
            } else {
                const statusEl = document.getElementById('admin-status');
                if (statusEl) {
                    statusEl.innerHTML = '‚úÖ Admin ativo';
                    statusEl.style.color = 'green';
                }
                mostrarBotoesUpload();
            }
        }
        
        // ===== FIX: FOR√áAR ATUALIZA√á√ÉO DAS IMAGENS =====
        function forcarAtualizacaoImagens() {
            const imagens = document.querySelectorAll('img');
            imagens.forEach(img => {
                const srcOriginal = img.src;
                if (srcOriginal && srcOriginal.startsWith('data:image')) {
                    if (srcOriginal.includes('?timestamp=')) {
                        img.src = srcOriginal.split('?')[0];
                    }
                }
            });
        }
        
        // ===== VERIFICAR E CARREGAR IMAGENS SALVAS =====
        function carregarImagensSalvas() {
            Object.values(STORAGE_KEYS).forEach(key => {
                const imagemSalva = localStorage.getItem(key);
                if (imagemSalva) {
                    window.dispatchEvent(new CustomEvent('imagemCarregada', { 
                        detail: { key, imagemSalva } 
                    }));
                }
            });
        }
        
        // ===== OBSERVAR MUDAN√áAS NO DOM =====
        function observarBotoesReact() {
            const observer = new MutationObserver(function(mutations) {
                const isAdmin = localStorage.getItem('isAdmin') === 'true';
                
                mutations.forEach(function(mutation) {
                    if (mutation.type === 'childList') {
                        mutation.addedNodes.forEach(node => {
                            if (node.nodeType === 1) {
                                if (node.textContent?.includes('Carregar Foto') || 
                                    node.textContent?.includes('üì∏')) {
                                    if (!isAdmin) {
                                        node.style.display = 'none';
                                    }
                                }
                            }
                        });
                    }
                });
            });
            
            observer.observe(document.body, {
                childList: true,
                subtree: true
            });
        }
        
        // ===== INICIALIZA√á√ÉO =====
        window.addEventListener('load', function() {
            esconderBotoesUpload();
            carregarImagensSalvas();
            forcarAtualizacaoImagens();
            observarBotoesReact();
            
            setTimeout(esconderBotoesUpload, 1000);
            setTimeout(esconderBotoesUpload, 2000);
            setTimeout(esconderBotoesUpload, 3000);
        });
        
        // ===== EXPOR FUN√á√ïES GLOBAIS =====
        window.mostrarBotoesUpload = mostrarBotoesUpload;
        window.esconderBotoesUpload = esconderBotoesUpload;
        window.forcarAtualizacaoImagens = forcarAtualizacaoImagens;
    </script>
</body>
</html>
